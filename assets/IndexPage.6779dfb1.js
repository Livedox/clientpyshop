import{Q as _,a as c,b as f}from"./QPage.7c3a4d91.js";import{Q as d}from"./QBtn.ad48a53d.js";import{api as b}from"./axios.14337833.js";import{_ as h,x as n,X as w,I as x,J as y,K as m,Y as g,L as o}from"./index.231f385d.js";import"./use-router-link.9f8560f1.js";import"./use-dark.511b56fa.js";const v=/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/,k=l=>v.test(l),z={setup(){let l=n(!0),s=n(""),i=n("");const e=w();function u(){const r="auth/local/"+(l.value?"register":"login");b.post(r,{email:s.value,password:i.value}).then(t=>{localStorage.setItem("accessToken",t.data.accessToken),e.push("./user")}).catch(t=>{t.response?alert(t.response.data.message):t.request?console.log(t.request.message):console.log(t.message)})}return{email:s,password:i,passwordChecker:{length(r){return r.length>=8&&r.length<20}},is_register:l,toggleRegister:()=>{l.value=!l.value},checkEmail:k,onSubmit:()=>u()}}},V={class:"q-pa-md",style:{"max-width":"400px",width:"350px"}},C={class:"flex justify-between"};function I(l,s,i,e,u,p){return x(),y(_,{class:"row items-center justify-evenly index-page"},{default:m(()=>[g("div",V,[o(f,{onSubmit:e.onSubmit,class:"q-gutter-md"},{default:m(()=>[o(c,{filled:"",type:"email",modelValue:e.email,"onUpdate:modelValue":s[0]||(s[0]=a=>e.email=a),label:"Your email *","lazy-rules":"",rules:[a=>e.checkEmail(a)||"Invalid email"]},null,8,["modelValue","rules"]),o(c,{filled:"",type:"password",modelValue:e.password,"onUpdate:modelValue":s[1]||(s[1]=a=>e.password=a),label:"Your password *","lazy-rules":"",rules:[a=>e.passwordChecker.length(a)||"Password must be between 8 and 20 characters"]},null,8,["modelValue","rules"]),g("div",C,[o(d,{label:e.is_register?"To login":"To registration",type:"button",color:"secondary",onClick:e.toggleRegister},null,8,["label","onClick"]),o(d,{label:e.is_register?"Register":"Login",type:"submit",color:"primary"},null,8,["label"])])]),_:1},8,["onSubmit"])])]),_:1})}var E=h(z,[["render",I]]);export{E as default};
